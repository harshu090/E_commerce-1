<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Page - Family Zone</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <script src="js/main.js" defer></script>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">
            <div class="company"></div>
            <h3>Family Zone</h3>
        </a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="home.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="shop.html">Shop</a></li>
                <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
                <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                <li class="nav-item"><a class="nav-link" href="order.html">Order</a></li>
                <li class="nav-item">
                    <a class="nav-link" href="cart.html"><i class="fa fa-shopping-bag"></i></a>
                </li>
            </ul>
            <form class="form-inline ml-auto" action="search_results.html" method="GET">
                <input class="form-control mr-sm-2" type="search" name="query" placeholder="Search" aria-label="Search" required>
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>

    <!-- Order Section -->
    <div class="container mt-5">
        <h2 class="text-center mb-4">Order Summary</h2>
        
        <!-- Order Summary -->
        <div class="row">
            <div class="col-md-8">
                <h4>Order Summary</h4>
                <table class="table table-bordered cart-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Example Order Items -->
                        <tr>
                            <td>Matching Kurta Jacket</td>
                            <td><input type="number" value="1" min="1" class="quantity-input"></td>
                            <td>$1000.00</td>
                            <td class="row-total">$1000.00</td>
                        </tr>
                        <tr>
                            <td>Jacket Family Set</td>
                            <td><input type="number" value="1" min="1" class="quantity-input"></td>
                            <td>$6000.00</td>
                            <td class="row-total">$6000.00</td>
                        </tr>
                        <tr>
                            <td>Patti Gown</td>
                            <td><input type="number" value="1" min="1" class="quantity-input"></td>
                            <td>$7000.00</td>
                            <td class="row-total">$7000.00</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="3" class="text-right">Subtotal:</th>
                            <th id="subtotal">$14000.00</th>
                        </tr>
                        <tr>
                            <th colspan="3" class="text-right">Shipping:</th>
                            <th id="shipping">$1000.00</th>
                        </tr>
                        <tr>
                            <th colspan="3" class="text-right">Total:</th>
                            <th id="total">$15000.00</th>
                        </tr>
                        <tr>
                            <th colspan="3" class="text-right">Grand Total:</th>
                            <th id="grand-total">$15000.00</th>
                        </tr>
                    </tfoot>
                </table>
                <button class="btn btn-primary" id="proceed-to-shipping">Proceed to Shipping Information</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cartTable = document.querySelector('.cart-table');
            const proceedButton = document.getElementById('proceed-to-shipping');

            function updateRowTotal(row) {
                const price = parseFloat(row.querySelector('td:nth-child(3)').textContent.replace('$', ''));
                const quantity = parseInt(row.querySelector('.quantity-input').value, 10);
                const totalCell = row.querySelector('.row-total');
                const total = price * quantity;
                totalCell.textContent = `$${total.toFixed(2)}`;
            }

            function updateCartTotal() {
                let subtotal = 0;
                document.querySelectorAll('.row-total').forEach(cell => {
                    subtotal += parseFloat(cell.textContent.replace('$', '')) || 0;
                });
                const shipping = 1000; // Fixed shipping cost
                const total = subtotal + shipping;

                document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
                document.getElementById('shipping').textContent = `$${shipping.toFixed(2)}`;
                document.getElementById('total').textContent = `$${total.toFixed(2)}`;
                document.getElementById('grand-total').textContent = `$${total.toFixed(2)}`;
            }

            cartTable.addEventListener('input', (event) => {
                if (event.target.classList.contains('quantity-input')) {
                    const row = event.target.closest('tr');
                    updateRowTotal(row);
                    updateCartTotal();
                }
            });

            proceedButton.addEventListener('click', () => {
                // Save order details to local storage
                const orderDetails = {
                    subtotal: document.getElementById('subtotal').textContent,
                    shipping: document.getElementById('shipping').textContent,
                    total: document.getElementById('total').textContent,
                    grandTotal: document.getElementById('grand-total').textContent,
                    items: Array.from(document.querySelectorAll('.row-total')).map(row => ({
                        product: row.parentElement.children[0].textContent,
                        quantity: row.parentElement.querySelector('.quantity-input').value,
                        price: row.parentElement.children[2].textContent,
                        total: row.textContent
                    }))
                };

                localStorage.setItem('orderDetails', JSON.stringify(orderDetails));

                // Redirect to shipping information page
                window.location.href = 'shipping.html';
            });

            updateCartTotal();
        });
    </script>

    <!-- Bootstrap and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
